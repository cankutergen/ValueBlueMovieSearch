# Microservices Architecture Overview

This project follows a microservices architecture, with each API built using a multi-layered design to ensure separation of concerns.

![diagram](https://github.com/user-attachments/assets/7785312b-0394-4c2a-bcc5-629ef4ff3028)

### Project Responsibilities

*ValueBlue.Core*  
- Houses core functionality shared across other services.
- Implements the repository pattern to manage MongoDB operations, reused by both the Identity.DataAccess and SearchLog.DataAccess projects.
- Similarly, it manages REST communication between APIs using the repository pattern.

*Identity Service*  
- Responsible for generating access tokens (JWT) for other services.
- Other services use middleware to validate the JWT generated by the Identity service.
- Token settings can be customized via the JwtTokenSettings section in appsettings.json.
- Manages user accounts, and on startup, it creates a default admin user if none exists, using settings from AdminUserSettings in appsettings.json.
- Operates with its own MongoDB instance, configured via the MongoDbSettings in appsettings.json.
- Bearer tokens should be included in the Authorization header for all requests made to secured endpoints. This ensures that only authenticated and authorized users can access protected resources across the services.

*MovieSearch Service*  
- Handles requests to the OMDB API to retrieve movie details and logs these searches through the SearchLog API.
- OMDB API key and base URLs can be configured in appsettings.json under ApiKeys and ApiBase, respectively.

*SearchLog Service*  
- Manages search log requests (GET, POST, DELETE).
- Operates its own MongoDB instance, with connection details set in MongoDbSettings within appsettings.json.
- Secured using JWT tokens.
- Receives requests from the Admin and MovieSearch services.

*Admin Service*  
- The main interaction API for administering search logs.
- Secured using JWT tokens.
- API base URLs are configurable through ApiBase in appsettings.json.

### Additional Features

- *Identity Service*: Facilitates new user creation (ADMIN or other roles) and handles custom access token requests.
- *SearchLog API*: Maintains search log entries and connects with the Admin API to handle requests. It can easily integrate with additional services as needed.
- *Logging*: Serilog is integrated for logging information and errors.
- *Performance Enhancements*: Memory caching is implemented for all GET functions, and pagination is included for list-returning methods.
- *Testing*: Comprehensive unit tests are included for all Business and API projects.

### Assumptions

- Services are expected to run with HTTPS configuration. To run on different URLs, update the ApiBase in appsettings.json for the Admin and MovieSearch projects.
- MongoDB connection strings do not include credentials by default. If needed, credentials can be added in MongoDbSettings in appsettings.json for the Identity and SearchLog projects.
